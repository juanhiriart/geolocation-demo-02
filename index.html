<!DOCTYPE html>
<<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>HTML5 Geolocation demo</title>
    <link rel="stylesheet" href="./CSS/main.css"/>
    <script type="text/javascript" src="./Javascript/bwH5.js"></script>
    <script type="text/javascript">
      var t = new bwTable();
      var geo;

      function getGeoLocation()
      {
        try
        {
          if(!! navigator.geolocation) return navigator.geolocation;
          else return undefined;
        }
        catch(e)
        {
          return undefined;
        }
      }

      function init()
      {
        if((geo = getGeoLocation()))
        {
          statusMessage('HTML5 Geolocation is supported');
          t.setHeader(['Latitude', 'Longitude']);
          t.addRow(['&nbsp;', '&nbsp;']);
        }
        else
        {
          statusMessage('HTML5 Geolocation is not supported');
        }
        geo.getCurrentPosition(show_coords);
      }

      function show_coords(position)
      {
        var lat = position.coords.latitude;
        var lon = position.coords.longitude;
        t.updateRow(0, [lat.toString(), lon.toString()]);
        dispResults();
      }

      function dispResults()
      {
        element('results').innerHTML = t.getTableHTML();
      }

      window.onload = function()
      {
        init();
      }

    </script>
  </head>
  <body>
    <div id="content">
      <h1>HTML5 Geolocation demo</h1>
      <p class="message" id="statusMessage"/>
      <div id="results">

      </div>
    </div>
  </body>
</html>
